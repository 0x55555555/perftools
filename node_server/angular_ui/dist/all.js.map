{"version":3,"sources":["app.js","d3.js","data_set.js","result-chart.js","result-controller.js","result-range.js","result-set.js","result-view-params.js","result.js","utils.js","view-editor.js","zoom-chart.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["var app = angular.module('myApp', [ 'd3' ]);\n","angular\n  .module('d3', [])\n  .factory('d3Service', ['$document', '$q', '$rootScope', '$window',\n    function($document, $q, $rootScope, $window) {\n        var d = $q.defer();\n\n        function onScriptLoad() {\n            // Load client in the browser\n            $rootScope.$apply(function() { d.resolve($window.d3); });\n        }\n        // Create a script tag with d3 as the source\n        // and call our onScriptLoad callback when it\n        // has been loaded\n\n        var scriptTag = $document[0].createElement('script');\n        scriptTag.type = 'text/javascript';\n        scriptTag.async = true;\n        scriptTag.src = 'https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.js';\n        scriptTag.charset = 'utf-8';\n\n        scriptTag.onreadystatechange = function () {\n            if (this.readyState == 'complete') onScriptLoad();\n        }\n\n        scriptTag.onload = onScriptLoad;\n\n        var s = $document[0].getElementsByTagName('body')[0];\n        s.appendChild(scriptTag);\n\n        return {\n            d3: function() { return d.promise; }\n        };\n    }\n]);\n","var DataSet = function() {\n  this.results = [];\n  this._start = null;\n  this._end = null;\n};\n\nDataSet.prototype.push = function(result) {\n  this.results.push(result);\n\n  if (!this._start || result.start < this._start) {\n    this._start = result.start;\n  }\n\n  if (!this._end || result.start > this._end) {\n    this._end = result.start;\n  }\n};\n\nDataSet.prototype.start = function() {\n    return this._start;\n};\n\nDataSet.prototype.end = function(result) {\n    return this._end;\n};\n\nvar DataSetMetaData = function() {\n  this.show = true;\n};\n","\nvar HoverEffect = function(parent, xScale, yScale, get_x, get_y, format_x, format_y) {\n  var group = parent.append(\"g\");\n\n  var x = group.append(\"line\")\n    .style({\n      \"stroke\": 'black',\n      \"stroke-width\": 2,\n      \"fill\": \"none\"\n    });\n\n  var y = group.append(\"line\")\n    .style({\n      \"stroke\": 'black',\n      \"stroke-width\": 2,\n      \"fill\": \"none\"\n    });\n\n  this.hide = function(d) {\n    group.transition()\n      .duration(400)\n      .ease(\"linear\")\n      .attr('opacity', 0.0);\n  }\n\n  this.show = function(d) {\n    group.transition()\n      .duration(400)\n      .ease(\"linear\")\n      .attr('opacity', 1.0);\n\n    x.transition()\n      .duration(100)\n      .ease(\"linear\")\n        .attr({\n          'x1': get_x(d),\n          'y1': get_y(d),\n          'x2': get_x(d),\n          'y2': yScale.range()[1]\n        });\n\n    y.transition()\n      .duration(100)\n      .ease(\"linear\")\n        .attr({\n          'x1': get_x(d),\n          'y1': get_y(d),\n          'x2': xScale.range()[0],\n          'y2': get_y(d)\n        });\n  }\n}\n\napp.directive(\"resultChartData\", [ \"d3Service\", function(d3Service) {\n  return {\n    restrict: \"A\",\n    link: function($scope, $elem, $attrs) {\n      d3Service.d3().then(function(d3) {\n        var display_data = $scope.display_data;\n        var colour = $scope.colour;\n        var results = $scope.data;\n        var xScale = $scope.x_scale;\n        var yScale = $scope.y_scale;\n\n        var current_x = function(d, i) { return xScale(d.x); }\n        var current_y = function(d, i) { return yScale(d.y); }\n        var current_y_sd_min = function(d) { return yScale(d.y - d.y_sd) }\n        var current_y_sd_max = function(d) { return yScale(d.y + d.y_sd) }\n        var current_y_min = function(d, i) { return yScale(d.y_min); }\n        var current_y_max = function(d, i) { return yScale(d.y_max); }\n\n        var graph = d3.select($elem[0]);\n\n        var hover = new HoverEffect(graph, xScale, yScale, current_x, current_y);\n\n        // Add an area for the sd around the mean.\n        if (display_data.range) {\n          var area = d3.svg.area()\n            .x(current_x)\n            .y0(current_y_sd_min)\n            .y1(current_y_sd_max);\n\n          graph.append(\"path\")\n            .attr({\n              'd': area(results),\n              'fill-opacity': 0.2,\n              'fill': colour\n            });\n        }\n\n        // Add a line for the mean\n        if (display_data.average) {\n          var line = d3.svg.line()\n            .x(current_x)\n            .y(current_y)\n            .interpolate(\"basis\");\n\n          graph.append(\"path\")\n            .attr({'d': line(results)})\n            .style({\n              \"stroke\": colour,\n              \"stroke-width\": 2,\n              \"fill\": \"none\"\n            });\n        }\n\n        // Setup members for per point ren\n        var data_point = graph\n          .selectAll(\"g\")\n            .data(results)\n              .enter()\n                .append(\"g\");\n\n        // Add min and max lines through points\n        if (display_data.minmax) {\n          data_point.append(\"line\")\n            .attr(\"x1\", current_x)\n            .attr(\"y1\", current_y_min)\n            .attr(\"x2\", current_x)\n            .attr(\"y2\", current_y_max)\n            .style(\"stroke\", colour)\n            .style(\"stroke-opacity\", 0.3)\n            .style(\"stroke-width\", 1);\n        }\n\n        // add points for means\n        if (display_data.average) {\n          data_point\n            .append(\"circle\")\n              .attr(\"cx\", current_x)\n              .attr(\"cy\", current_y)\n              .attr(\"r\", 5)\n              .style(\"fill\", 'white')\n              .style(\"fill-opacity\", 0.8)\n              .on(\"mouseover\", hover.show)\n              .on(\"mouseout\", hover.hide)\n          data_point\n            .append(\"circle\")\n              .attr(\"cx\", current_x)\n              .attr(\"cy\", current_y)\n              .attr(\"r\", 3)\n              .style(\"fill\", colour)\n              .on(\"mouseover\", hover.show)\n              .on(\"mouseout\", hover.hide);\n        }\n\n        var detail = {\n          show: function() {\n            data_point.attr('opacity', 1.0);\n            console.log(\"show\");\n          },\n          hide: function() {\n            data_point.attr('opacity', 0.0);\n            console.log(\"hide\");\n          }\n        }\n      });\n    }\n  }\n}]);\n\napp.directive(\"resultChart\", [ \"$parse\", \"$compile\", \"d3Service\", function($parse, $compile, d3Service) {\n  return {\n    restrict: \"E\",\n    scope: {\n       data: \"&\",\n       range: \"&\"\n    },\n    link: function($scope, $elem, $attrs) {\n      d3Service.d3().then(function(d3) {\n\n        var padding = 40;\n        var xScale, yScale, xAxisGen, yAxisGen, inputData, xRange;\n\n        var root = $elem[0];\n        var svg = d3.select(root)\n          .append(\"svg\")\n            .attr(\"width\", 850)\n            .attr(\"height\", 400);\n\n        var clip = svg.append(\"defs\")\n          .append(\"clipPath\")\n          .attr(\"id\",\"graphClip\")\n          .append(\"rect\");\n\n        var graphs = svg.append(\"g\");\n        var refreshClip = function() {\n          var x = xScale.range();\n          var y = yScale.range();\n          clip\n            .attr(\"x\", x[0])\n            .attr(\"y\", y[0])\n            .attr(\"width\", x[1]-x[0])\n            .attr(\"height\", y[1]-y[0]);\n\n          graphs.attr(\"clip-path\",\"url(#graphClip)\");\n        }\n\n\n        function redrawLineChart() {\n          if (!xRange || !inputData) {\n            return;\n          }\n\n          graphs.selectAll('*').remove();\n\n          var graphs_selection = graphs.selectAll(\"svg\")\n            .data(inputData.results);\n\n          var range = xRange.safe().range;\n\n          xScale = d3.scale.linear()\n              .domain(xRange.safe().range)\n              .range([padding, svg.attr(\"width\") - padding]);\n\n          yScale = d3.scale.linear()\n              .domain(inputData.y.invert().range)\n              .range([padding, svg.attr(\"height\") - padding]);\n          refreshClip();\n\n\n          graphs_selection.exit().remove();\n          graphs_selection\n            .enter()\n              .append(\"g\")\n              .select(function(d, i) {\n                this.appendChild($compile(\"<svg data-result-chart-data></svg>\")({\n                  data: d.data,\n                  display_data: inputData.display,\n                  x_scale: xScale,\n                  y_scale: yScale,\n                  colour: d.colour\n                })[0]);\n              });\n\n          xAxisGen = d3.svg.axis()\n              .scale(xScale)\n              .orient(\"bottom\")\n              .ticks(inputData.y.tickCount())\n              .tickFormat(inputData.x.format);\n\n          yAxisGen = d3.svg.axis()\n              .scale(yScale)\n              .orient(\"left\")\n              .ticks(inputData.y.tickCount())\n              .tickFormat(inputData.y.format);\n\n          svg.selectAll(\"g.x.axis\").call(xAxisGen);\n          svg.selectAll(\"g.y.axis\").call(yAxisGen);\n        }\n\n        $scope.$watch(\n          function(s) { return $scope.data() ? $scope.data().results : null; },\n          function(newVal, oldVal){\n            inputData = newVal;\n            redrawLineChart();\n          },\n          true\n        );\n\n        $scope.$watch(\n          function(s) { return s.range() },\n          function(newVal, oldVal) {\n            xRange = newVal;\n            redrawLineChart();\n          },\n          true\n        );\n\n        svg.append(\"svg:g\")\n          .attr(\"class\", \"x axis\")\n          .attr(\"transform\", \"translate(0,\" + (svg.attr(\"height\") - padding) + \")\");\n\n        svg.append(\"svg:g\")\n          .attr(\"class\", \"y axis\")\n          .attr(\"transform\", \"translate(\" + padding + \",0)\");\n      });\n    }\n  };\n}]);\n","var ServerUrl = 'http://localhost:3000/';\n\napp.controller('ResultController', function($scope, $http, Result, ResultRange, ResultSet) {\n  $scope.data_set_tree = { };\n  $scope.data_sets = { results: { } };\n  $scope.data_sets_meta_data = { };\n  $scope.range = new ResultRange();\n  $scope.view = new ResultSet();\n\n  var add_to_data_set = function(path, data) {\n    var parent = $scope.data_set_tree;\n    var result_path = \"\";\n    for (var i = 0; i < path.length; ++i) {\n      var name = path[i];\n      result_path += \"::\" + name;\n\n      if (i == path.length-1) {\n       if (!(name in parent)) {\n         var ds = new DataSet();\n         parent[name] = ds;\n         $scope.data_sets.results[result_path] = ds;\n         $scope.data_sets_meta_data[result_path] = new DataSetMetaData();\n\n         $scope.view.process($scope.data_sets);\n       }\n       parent[name].push(data);\n     }\n     else {\n       if (!(name in parent)) {\n         parent[name] = {};\n       }\n     }\n\n      parent = parent[name];\n    }\n  }\n\n  var get_result = function(result) {\n    $http({\n      method: 'JSONP',\n      url: ServerUrl + 'result?id=' + result.id + '&callback=JSON_CALLBACK'\n    }).success(function(data, status) {\n      for (var ctx_name in data.contexts) {\n        var ctx = data.contexts[ctx_name];\n\n        var parents = {};\n        for (var res in ctx.results) {\n          var results = ctx.results[res];\n          parents[results.name] = results.parent;\n        }\n\n        var parentLists = {};\n        for (var res in parents) {\n          var path = [];\n          parentLists[res] = path;\n          var obj = res;\n          while(obj = parents[obj]) {\n            path.push(obj);\n          }\n          path.push(res);\n        }\n\n        for (var res in ctx.results) {\n          var results = ctx.results[res];\n          var path = [ data.recipe, ctx_name ].concat(parentLists[results.name]);\n\n          if (results.total_time) {\n            add_to_data_set(path.concat(\"duration\"), new Result(\n              ctx.start,\n              ctx.machine_identity,\n              results.total_time,\n              results.total_time_sq,\n              results.min_time,\n              results.max_time,\n              results.fire_count\n            ));\n          }\n\n          if (results.total_offset_time) {\n            add_to_data_set(path.concat(\"offset\"), new Result(\n              ctx.start,\n              ctx.machine_identity,\n              results.total_offset_time,\n              results.total_offset_time_sq,\n              results.min_offset_time,\n              results.max_offset_time,\n              results.fire_count\n            ));\n          }\n        }\n      }\n      result.value = 4;\n    }).error(function(data, status) {\n      console.log(\"Error getting result summary info\", data, status);\n    });\n  }\n\n  var get_results = function(key, key_data) {\n    $http({\n      method: 'JSONP',\n      url: ServerUrl + 'result_summary?recipe=' + key_data._id + '&callback=JSON_CALLBACK'\n    }).success(function(data, status) {\n      key_data.results = [];\n      for (var i in data) {\n        var result = {\n           date: data[i].start,\n           value: 0,\n           id: data[i]._id\n        };\n        key_data.results.push(result);\n        get_result(result);\n      }\n    }).error(function(data, status) {\n      console.log(\"Error getting result summary info\", data, status);\n    });\n  };\n\n  var get_summary = function() {\n    $http({\n      method: 'JSONP',\n      url: ServerUrl + 'summary?callback=JSON_CALLBACK'\n    }).success(function(data, status) {\n      for (var i in data) {\n        data[i].results = [\n          { date: data[i].first, value: 0 },\n          { date: data[i].last, value: 0 },\n        ];\n        get_results(i, data[i]);\n      }\n      $scope.results = data;\n    }).error(function(data, status) {\n      console.log(\"Error getting summary info\", data, status);\n    });\n  };\n\n  get_summary();\n});\n","\napp.factory(\"ResultRange\", function() {\n  var ResultRange = function(min, max) {\n    this.range = [ min, max ];\n    this.format = ResultRange.defaultFormat;\n  };\n\n  ResultRange.prototype.defaultFormat = function(val) {\n    return val.toString();\n  }\n\n  ResultRange.prototype.tickCount = function(val) {\n    return 5;\n  }\n\n  ResultRange.prototype.setMin = function(val) {\n    this.range[0] = val;\n  }\n\n  ResultRange.prototype.setMax = function(val) {\n    this.range[1] = val;\n  }\n\n  ResultRange.prototype.invert = function() {\n    return new ResultRange(this.range[1], this.range[0]);\n  }\n\n  ResultRange.prototype.safe = function() {\n    return new ResultRange(this.range[0] ? this.range[0] : 0, this.range[1] ? this.range[1] : 0);\n  }\n\n  ResultRange.prototype.expand = function(val) {\n    if (this.range[0] == null || val < this.range[0]) {\n      this.range[0] = val;\n    }\n    if (this.range[1] == null || val > this.range[1]) {\n      this.range[1] = val;\n    }\n  }\n  \n  return ResultRange;\n});\n","\napp.factory(\"ResultSet\", function(ResultRange) {\n  var ResultSet = null;\n  ResultSet = function() {\n    this.input = this.results = null;\n    this._filter = function(set, result) { return true; };\n\n    this.filters = ResultSet.FilterModes;\n    for(this.filter in this.filters) break;\n\n    this.groups = ResultSet.GroupModes;\n    for(this.group in this.groups) break;\n\n    this.sets = ResultSet.SetModes;\n    for(this.set in this.sets) break;\n\n    this.sorts = ResultSet.SortModes;\n    for(this.sort in this.sorts) break;\n\n    this._select = function(entry) {\n      return {\n        x: entry.starts[0],\n        y: entry.average(),\n        y_sd: entry.sd(),\n        y_min: entry.min,\n        y_max: entry.max\n      }\n    };\n  };\n\n  ResultSet.FilterModes = {\n    'none': function(set, result) { return true; }\n  };\n\n  ResultSet.GroupModes = {\n    'start_second': function(set, result) {\n      return result.starts[0];\n    },\n    'start_week': function(set, result) {\n      var date = new Date(result.starts[0] * 1000);\n      return date.getFullYear() + \"_\" + Math.floor(date.getDate()/7);\n    },\n    'start_month': function(set, result) {\n      var date = new Date(result.starts[0] * 1000);\n      return date.getFullYear() + \"_\" + date.getMonth();\n    },\n    'start_dow': function(set, result) {\n      return new Date(result.starts[0] * 1000).getDay();\n    },\n    'start_dom': function(set, result) {\n      return new Date(result.starts[0] * 1000).getDate();\n    }\n  };\n\n  ResultSet.SetModes = {\n    'data_sets': function(set, result) {\n      return set;\n    },\n    'none': function(set, result) {\n      return 0;\n    }\n  };\n\n  ResultSet.SortModes = {\n    'x_increasing': function(list) {\n      list.sort(function(a, b) {\n        return a.x - b.x;\n      });\n    },\n  };\n\n  ResultSet.prototype.reprocess = function(input) {\n    this.process(this.input);\n  }\n\n  ResultSet.prototype.process = function(input) {\n    this.input = input;\n    var x_range = new ResultRange();\n    var y_range = new ResultRange();\n\n    var results = { };\n\n    var set_fn = this.sets[this.set];\n    var sort_fn = this.sorts[this.sort];\n    var filter_fn = this.filters[this.filter];\n    var group_fn = this.groups[this.group];\n\n    for (var i in input.results) {\n      var data_set = input.results[i];\n      for (var r in data_set.results) {\n        var result = data_set.results[r];\n        if (!filter_fn(r, result)) {\n          continue;\n        }\n\n        var set = set_fn(i, result);\n        var results_set = results[set];\n        if (results_set == null) {\n          results_set = { };\n          results[set] = results_set;\n        }\n\n        var grp = group_fn(r, result);\n\n        if (results_set.hasOwnProperty(grp)) {\n          results_set[grp] = Result.combine(results_set[grp], result);\n        }\n        else {\n          results_set[grp] = Result.clone(result);\n        }\n      }\n    }\n\n    var result_list = [];\n    for (var set_name in results) {\n      var set = results[set_name];\n      var set_list = [];\n      result_list.push({ data: set_list, colour: \"#\"+((1<<24)*Math.random()|0).toString(16) });\n      for (var key in set) {\n        var sel = this._select(set[key]);\n        set_list.push(sel);\n\n        x_range.expand(sel.x);\n        y_range.expand(sel.y_min);\n        y_range.expand(sel.y_max);\n      }\n\n      sort_fn(set_list);\n    }\n\n    x_range.format = function(d) {\n      var date = new Date(d * 1000);\n      var yyyy = date.getFullYear().toString();\n      var mm = (date.getMonth()+1).toString(); // getMonth() is zero-based\n      var dd  = date.getDate().toString();\n\n      var result = dd + \"/\" + mm + \"/\" + yyyy;\n      if ((x_range.range[1] - x_range.range[0]) < 60*60*24*2) {\n        result = date.getHours() + \":\" + date.getMinutes() + \" \" + result;\n      }\n\n      return result;\n    };\n\n    this.results = new ResultViewParams(result_list, x_range, y_range);\n  }\n\n  return ResultSet;\n});\n","\napp.factory(\"ResultViewParams\", function(utils) {\n  var ResultViewParams = function(results, x_range, y_range) {\n    this.results = results;\n    this.x = x_range;\n    this.y = y_range;\n    this.display = {\n      \"average\": true,\n      \"range\": true,\n      \"minmax\": true,\n    };\n  };\n  return ResultViewParams;\n});\n","\napp.factory(\"Result\", function(utils) {\n    var Result = function(start, identity, total, total_sq, min, max, count) {\n      if (start instanceof Array) {\n        this.starts = start;\n      }\n      else {\n        this.starts = [ start ];\n      }\n\n      if (identity instanceof Array) {\n        this.machine_identities = identity;\n      }\n      else {\n        this.machine_identities = [ identity ];\n      }\n      this.total = total;\n      this.total_sq = total_sq;\n      this.min = min;\n      this.max = max;\n      this.count = count;\n    };\n\n    Result.prototype.average = function() {\n        return this.total / this.count;\n    };\n\n    Result.prototype.sd = function() {\n        var mean_sq = this.total_sq / this.count;\n        var mean = this.average();\n        return Math.sqrt(mean_sq - mean * mean);\n    };\n\n    Result.clone = function(a) {\n      return new Result(\n        utils.clone_array(a.starts),\n        utils.clone_array(a.machine_identities),\n        a.total,\n        a.total_sq,\n        a.min,\n        a.max,\n        a.count\n      );\n    };\n\n    Result.combine = function(a, b) {\n      var cloned = Result.clone(a);\n\n      cloned.starts = cloned.starts.concat(b.starts);\n      cloned.machine_identities = cloned.machine_identities.concat(b.machine_identities);\n      cloned.total += b.total;\n      cloned.total_sq += b.total_sq;\n      cloned.min = Math.min(cloned.min, b.min);\n      cloned.max = Math.max(cloned.max, b.max);\n      cloned.count += b.count;\n\n      return cloned;\n    };\n\n    return Result;\n});\n","\napp.factory(\"utils\", function() {\n    return {\n        clone_array: (map) => arr.slice(0)\n    };\n});\n","\n\napp.directive(\"viewEditor\", [ \"d3Service\", function(d3Service) {\n  return {\n    restrict: \"E\",\n    scope: {\n       view: \"=\"\n    },\n    templateUrl: '/templates/view-editor.html',\n    link: function($scope, $elem, $attrs) {\n      $scope.reprocess = function() {\n        $scope.view.reprocess();\n      }\n    }\n  };\n}]);\n","var DragHandle = function(parent, data) {\n\n  var dragright = d3.behavior.drag()\n      .origin(Object)\n      .on(\"drag\", rdragresize);\n\n  var sync = function() {\n    dragbarright.attr(\"x\", function(d) { return data.value - data.width/2; });\n    dragbarright.attr(\"width\", function(d) { return data.width; });\n  };\n\n  this.sync = sync;\n\n  function rdragresize(d) {\n    var min = data.min();\n    var max = data.max();\n    data.value = Math.max(min, Math.min(max, data.value + d3.event.dx));\n    sync();\n    data.changed();\n  }\n\n  var dragbarright = parent.append(\"rect\")\n        .attr(\"x\", function(d) { return data.value - data.width/2; })\n        .attr(\"y\", function(d) { return 10; })\n        .attr(\"id\", \"dragright\")\n        .attr(\"height\", 30)\n        .attr(\"width\", data.width)\n        .attr(\"fill\", \"gray\")\n        .attr(\"stroke\", \"black\")\n        .attr(\"stroke-width\", 1.0)\n        .attr(\"cursor\", \"ew-resize\")\n        .call(dragright);\n}\n\napp.directive(\"zoomChart\", [ \"$parse\", \"$compile\", \"d3Service\", function($parse, $compile, d3Service) {\n  return {\n    restrict: \"E\",\n    scope: {\n       data: \"&\",\n       range: \"=\"\n    },\n    link: function($scope, $elem, $attrs) {\n      d3Service.d3().then(function(d3) {\n\n        var padding = 40;\n        var xScale, yScale, xAxisGen, yAxisGen;\n\n        var root = $elem[0];\n        var svg = d3.select(root)\n          .append(\"svg\")\n            .attr(\"width\", 850)\n            .attr(\"height\", 50);\n\n        var selectors = svg.append(\"g\");\n\n        function redrawLineChart(range) {\n          if (!$scope.data().results) {\n            return;\n          }\n\n          selectors.selectAll('*').remove();\n\n          xScale = d3.scale.linear()\n              .domain(range)\n              .range([padding, svg.attr(\"width\") - padding]);\n\n          xAxisGen = d3.svg.axis()\n              .scale(xScale)\n              .orient(\"bottom\")\n              .ticks(5)\n              .tickFormat($scope.data().results.x.format);\n\n          svg.selectAll(\"g.x.axis\").call(xAxisGen);\n\n          var min = xScale.range()[0];\n          var max = xScale.range()[1];\n          var current_min = {\n            value: min,\n            width: 7\n          };\n          var current_max = {\n            value: max,\n            width: 7\n          };\n          var centre = {\n            min: function() { return min; },\n            max: function() { return max; }\n          };\n\n          current_min.min = function() { return min; }\n          current_min.max = function() { return current_max.value - current_max.width; }\n          current_max.min = function() { return current_min.value + current_min.width; }\n          current_max.max = function() { return max; }\n\n          var update_centre = function(handles) {\n            centre.value = (current_max.value+current_min.value) / 2;\n            centre.width = (current_max.value-current_min.value) - (handles ? current_min.width : 0.0);\n          }\n          update_centre(true);\n\n          var update_scope = function(apply) {\n            $scope.range.setMin(xScale.invert(current_min.value));\n            $scope.range.setMax(xScale.invert(current_max.value));\n            if(apply) { $scope.$apply(); }\n          }\n          update_scope(false);\n\n          current_min.changed = current_max.changed = function() {\n            update_centre();\n            centre_handle.sync();\n            update_scope(true);\n          }\n\n          centre.changed = function() {\n            current_min.value = Math.max(current_min.min(), centre.value - centre.width / 2);\n            current_max.value = Math.min(current_max.max(), centre.value + centre.width / 2);\n\n            min_handle.sync();\n            max_handle.sync();\n            update_centre(false);\n            update_scope(true);\n          }\n\n          var centre_handle = new DragHandle(selectors, centre);\n          var min_handle = new DragHandle(selectors, current_min);\n          var max_handle = new DragHandle(selectors, current_max);\n        }\n\n        $scope.$watch(\n          function() {\n            var data = $scope.data() ? $scope.data().results : null;\n            return data ? data.x.range : [0, 0];\n          },\n          function(newVal, oldVal) {\n            inputData = newVal;\n            redrawLineChart(newVal != undefined ? newVal : []);\n          },\n          true\n        );\n\n        svg.append(\"svg:g\")\n          .attr(\"class\", \"x axis\")\n          .attr(\"transform\", \"translate(0,25)\");\n      });\n    }\n  };\n}]);\n"],"sourceRoot":"/source/"}